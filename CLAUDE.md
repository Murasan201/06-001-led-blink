# CLAUDE.md - プロジェクトルール

## プロジェクト概要
- **プロジェクト名**: LED点灯アプリ（06-001）
- **目的**: Raspberry Pi 5のGPIO制御によるLED点滅システム
- **対象**: プログラミング初心者向け電子工作演習

## 開発ルール

### 業務開始時の必須確認事項
- **要件定義書の確認**: 業務開始時は必ず `06-001_LED点灯アプリ_要件定義書.md` を読み返し、最新の要件と仕様を確認する
- **プロジェクト状況把握**: 現在の進捗状況と残タスクを確認する
- **変更履歴確認**: 前回からの変更点や更新事項をチェックする

### コーディング規約
- **言語**: Python 3.9以上
- **コーディングスタイル**: PEP8準拠
- **ライブラリ**: gpiozeroを優先使用
- **詳細な規約**: 本プロジェクトに含まれる以下の規約に**必ず従うこと**
  - **`python_coding_guidelines.md`**: Pythonコーディングガイドライン全般
    - `if __name__ == "__main__":` の必須化（実行可能なファイル）
    - 関数化とtry-finallyの使用
    - docstringの記載（すべての関数・クラス）
    - インポートの順序（標準→サードパーティ→自作）
    - エラーハンドリングの実装
  - **`COMMENT_STYLE_GUIDE.md`**: コメント・ドキュメント記載方法
    - ファイルヘッダーコメント（シバン、プロジェクト名、要件定義書参照）
    - クラスのdocstring（役割と設計意図）
    - メソッド/関数のdocstring（処理内容、Args、Returns）
    - インラインコメント（重要な処理、初心者向けの補足、トラブルシューティング）
    - エラーハンドリングのコメント（エラーメッセージと対処方法）
    - main関数のコメント（セクション区切り、モード説明）
- **コメント規約（詳細）**:
  - **言語**: 日本語で統一
  - **初心者向け**: わかりやすい表現と必要に応じて技術用語の説明
  - **適度な量**: コードの可読性を損なわない程度に記載
  - **複雑な処理**: 重要な判定部分に必ずコメントを追加
  - **形式**: 本プロジェクトに含まれる`COMMENT_STYLE_GUIDE.md`で定義された形式に従う
- **関数分割**: 機能ごとに適切に分割
- **エラーハンドリング**: 必須実装（初心者向けのメッセージを含める）
- **`if __name__ == "__main__":`**: 実行可能なPythonファイル（20行以上）には必須
- **docstring**: すべての関数・クラスに記載必須（COMMENT_STYLE_GUIDE.md に従う）
- **コード準拠確認**: 新規コード作成時・修正時は必ず上記ガイドラインに準拠していることを確認

### ファイル構成ルール
- **メインスクリプト**: `led_blink.py`
- **ドキュメント**: `README.md`（英語で記載）
- **依存関係**: `requirements.txt`
- **ライセンス**: `LICENSE`（既存）
- **要件定義**: `06-001_LED点灯アプリ_要件定義書.md`（既存）
- **プロジェクトルール**: `CLAUDE.md`（このファイル）
- **コーディング規約**: `python_coding_guidelines.md`、`COMMENT_STYLE_GUIDE.md`

### セキュリティルール
- **権限**: 最小権限の原則
- **GPIO制御**: 適切なクリーンアップ処理必須
- **入力検証**: 全ての引数とパラメータを検証
- **エラー情報**: 機密情報の漏洩防止
- **機密情報管理**: 
  - ユーザー名、パスワード、APIキー、秘密鍵などの機密情報をGitHubにアップロードしない
  - 設定ファイルや環境変数ファイル（.env等）は.gitignoreに追加
  - コード内にハードコードされた機密情報がないことを確認
- **リポジトリ更新前チェック**: 
  - コミット前に必ず機密情報が含まれていないかコードレビューを実施
  - git add前にファイル内容を再確認
  - .gitignoreの設定が適切であることを確認

### テストルール
- **回路テスト**: 実機での動作確認必須
- **引数テスト**: 各コマンドライン引数の検証
- **エラーテスト**: 異常系の動作確認
- **割り込みテスト**: Ctrl+Cでの正常終了確認

### ドキュメントルール
- **README**: 英語で記載し、安全注意事項を必ず記載
- **回路図**: ピン配置と接続方法を明記
- **使用例**: 具体的なコマンド例を提供
- **トラブルシューティング**: よくある問題と解決方法

### ハードウェア要件
- **Raspberry Pi**: Raspberry Pi 5
- **OS**: Raspberry Pi OS（最新版）
- **GPIO**: 1-40番ピン対応
- **回路**: 必ず330Ω抵抗使用（安全性）

### 運用ルール
- **バックアップ**: 重要な変更前にバックアップ
- **バージョン管理**: 機能追加時はバージョン番号更新
- **ログ**: タイムスタンプ付きで動作状況記録
- **終了処理**: 必ずGPIOクリーンアップ実行

## 禁止事項
- 抵抗なしでのLED接続
- 電源投入中の配線変更
- 適切な権限なしでのGPIO操作
- クリーンアップ処理の省略

## 推奨事項
- 定期的なコードレビュー
- 実機テストでの動作確認
- エラーログの適切な管理
- 教育効果を考慮した実装

---
最終更新: 2025-11-02
文書番号: 06-001

## 変更履歴
- 2025-11-02: `python_coding_guidelines.md` と `COMMENT_STYLE_GUIDE.md` の規約参照を追加、docstring と `if __name__ == "__main__":` の必須化を明記
- 2025-11-02: コーディング規約にガイドラインの詳細項目を記載し、準拠確認を明記